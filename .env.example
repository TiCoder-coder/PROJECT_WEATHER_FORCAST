# ============================================================
# .env.example
# Copy file này -> .env và điền giá trị thật.
# Tuyệt đối KHÔNG commit file .env lên Git.
#
# Tips:
# - Nếu giá trị có ký tự đặc biệt (ví dụ: @, $, +, #, %, ...),
#   thường vẫn dùng được, nhưng an toàn nhất là đặt trong dấu ngoặc kép:
#   VAR="value-with-special-chars"
# - Với URI có password ký tự đặc biệt: nên URL-encode password.
# ============================================================


# =========================
# Django / App Core
# =========================

# Django secret key (bắt buộc). Dùng để ký session/csrf/crypto trong Django.
# Generate mới cho môi trường production.
SECRET_KEY="your-django-secret-key"

# Tên database mặc định (MongoDB DB name)
DB_NAME="Login"


# =========================
# MongoDB Connection
# =========================

# URI kết nối MongoDB (ưu tiên dùng biến này nếu code của bạn đọc MONGO_URI).
# Ví dụ local replica set / single node:
# MONGO_URI="mongodb://localhost:27110/Login?directConnection=true"
MONGO_URI="mongodb://localhost:27110/Login?directConnection=true"

# Nếu dùng MongoDB Atlas / SRV:
# Lưu ý: password có ký tự đặc biệt phải URL-encode.
# Ví dụ:
# DB_HOST="mongodb+srv://<username>:<password>@cluster0.xxxxx.mongodb.net/?retryWrites=true&w=majority"
DB_HOST="mongodb+srv://<username>:<password>@cluster0.xxxxx.mongodb.net/"

# User/Password/Port/Auth cho Mongo kiểu truyền thống (tuỳ project có dùng hay không).
# Nếu bạn dùng hoàn toàn MONGO_URI, có thể không cần các biến này.
DB_USER="<mongo-username>"
DB_PASSWORD="<mongo-password>"
DB_PORT=27017
DB_AUTH_SOURCE="admin"
DB_AUTH_MECHANISM="SCRAM-SHA-1"

# Email admin hệ thống (có thể dùng cho seed admin / thông báo hệ thống)
DB_ADMIN_EMAIL="admin@example.com"


# =========================
# Security / Lockout Policy
# =========================

# Số lần đăng nhập sai tối đa trước khi khoá tạm thời
MAX_FAILED_ATTEMPS=5

# Thời gian khoá (giây) khi vượt MAX_FAILED_ATTEMPS
LOCKOUT_SECOND=600


# =========================
# Reset Token (Quên mật khẩu bằng link/token)
# =========================

# Salt dùng để tạo token reset (nên giữ bí mật + ổn định theo môi trường)
RESET_TOKEN_SALT="manager-reset-salt"

# Token reset hết hạn sau bao nhiêu giây (ví dụ 3600 = 1 giờ)
RESET_TOKEN_EXPIRY_SECONDS=3600


# =========================
# Password / JWT Security
# =========================

# Pepper cho password hashing (bí mật, giống "extra secret" bổ sung)
PASSWORD_PEPPER="<your-password-pepper>"

# JWT secret để ký token (bắt buộc nếu bạn tự tạo JWT)
JWT_SECRET="<your-jwt-secret>"

# Thuật toán ký JWT (thường HS256)
JWT_ALGORITHM="HS256"

# TTL access token (giây). Ví dụ 900 = 15 phút
JWT_ACCESS_TTL=900

# TTL refresh token (giây). Ví dụ 604800 = 7 ngày
JWT_REFRESH_TTL=604800

# Bật/tắt kiểm tra revoke access token (tuỳ logic hệ thống)
CHECK_ACCESS_REVOKE=false

# Một số dự án dùng thêm expire theo giờ/ngày:
ACCESS_TOKEN_EXPIRE_HOURS=3
REFRESH_TOKEN_EXPIRE_DAYS=1

# Issuer / Audience để validate JWT rõ ràng hơn
JWT_ISSUER="weather_api"
JWT_AUDIENCE="weather_web"


# =========================
# Default Admin Seed (tuỳ bạn có dùng seed admin hay không)
# =========================

# Username admin mặc định (nếu code có seed)
USER_NAME_ADMIN="AdminName"

# Mật khẩu admin mặc định (KHÔNG dùng password thật trong example)
ADMIN_PASSWORD="<admin-password>"

# Email admin mặc định
ADMIN_EMAIL="admin@example.com"


# =========================
# Email SMTP (Gmail / SMTP)
# =========================

# Backend gửi email của Django
EMAIL_BACKEND="django.core.mail.backends.smtp.EmailBackend"

# SMTP host (Gmail)
EMAIL_HOST="smtp.gmail.com"

# SMTP port (TLS thường 587)
EMAIL_PORT=587

# Email gửi (tài khoản SMTP)
EMAIL_HOST_USER="your-smtp-email@gmail.com"

# Mật khẩu SMTP (nếu Gmail nên dùng App Password)
EMAIL_HOST_PASSWORD="<smtp-app-password>"

# Bật TLS
EMAIL_USE_TLS=True

# From email hiển thị ở người nhận
DEFAULT_FROM_EMAIL="VN Weather Hub <your-smtp-email@gmail.com>"


# =========================
# OTP Reset Password Policy (Quên mật khẩu bằng OTP)
# =========================

# OTP expire (giây) - ví dụ 600 = 10 phút
PASSWORD_RESET_OTP_EXPIRE_SECONDS=600

# Số lần nhập OTP sai tối đa
PASSWORD_RESET_OTP_MAX_ATTEMPTS=5

# Thời gian tối thiểu giữa 2 lần resend OTP (giây)
RESET_OTP_RESEND_MIN_SECONDS=60

# Giới hạn resend OTP tối đa mỗi giờ
RESET_OTP_MAX_PER_HOUR=5


# =========================
# Resend (Email service) - nếu bạn dùng Resend API
# =========================

# API key của Resend (GIỮ BÍ MẬT)
RESEND_API_KEY="<your-resend-api-key>"

# Email gửi mặc định (Resend)
RESEND_FROM_EMAIL="onboarding@resend.dev"
